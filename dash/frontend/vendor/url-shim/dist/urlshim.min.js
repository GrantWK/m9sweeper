!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.urlshim={})}(this,function(e){function t(e,t,n){throw(n=new TypeError(e)).code=t,n}function n(e){t("Invalid URL: "+e,"ERR_INVALID_URL")}function r(e,n,r,o){r='The "name" ',o="argument",e&&(r+='and "value" ',o+="s"),n<++e&&t(r+o+" must be specified","ERR_MISSING_ARGS")}function o(e,t){var n=0,r={next:function(){return{value:e[n++],done:n>e.length}}};return t&&(r[Symbol.iterator]=function(){return r}),r}function i(e,n){var i,f,u,h,c,l=this,s=[];try{h=!!Symbol.iterator}catch(e){h=!1}if(e)if(e.keys&&e.getAll)e.forEach(function(e,t){p(t,e)});else if(e.pop)for(f=0;f<e.length;f++)p.apply(0,e[f]);else if("object"==typeof e)for(i in e)a(i,e[i]);else if("string"==typeof e)for("?"==e[0]&&(e=e.substring(1)),u=decodeURIComponent(e).split("&");i=u.shift();)~(f=i.indexOf("="))||(f=i.length),p(i.substring(0,f),i.substring(++f));function a(e,t){for(r(1,arguments.length),t=String(t),u=!1,f=s.length;f--;)(c=s[f])[0]==e&&(u?s.splice(f,1):(c[1]=t,u=!0));u||s.push([e,t]),m()}function p(e,t){r(1,arguments.length),s.push([e,String(t)]),m()}function g(){for(c="",f=0;f<s.length;f++)c&&(c+="&"),c+=encodeURIComponent(s[f][0])+"="+encodeURIComponent(s[f][1]);return c.replace(/%20/g,"+")}function m(){n&&(n.search=s.length?"?"+g().replace(/=$/,""):"")}return l.append=p,l.delete=function(e){for(r(0,arguments.length),f=s.length;f--;)s[f][0]==e&&s.splice(f,1);m()},l.entries=function(){return o(s,h)},l.forEach=function(e){for("function"!=typeof e&&t("Callback must be a function","ERR_INVALID_CALLBACK"),f=0;f<s.length;f++)e(s[f][1],s[f][0])},l.get=function(e){for(r(0,arguments.length),f=0;f<s.length;f++)if(s[f][0]==e)return s[f][1];return null},l.getAll=function(e){for(r(0,arguments.length),c=[],f=0;f<s.length;f++)s[f][0]==e&&c.push(s[f][1]);return c},l.has=function(e){for(r(0,arguments.length),f=0;f<s.length;f++)if(s[f][0]==e)return!0;return!1},l.keys=function(){for(c=[],f=0;f<s.length;f++)c.push(s[f][0]);return o(c,h)},l.set=a,l.sort=function(){for(u=[],c=[],f=0;f<s.length;u.push(s[f++][0]));for(u.sort();i=u.shift();)for(f=0;f<s.length;f++)if(s[f][0]==i){c.push(s.splice(f,1).shift());break}s=c,m()},l.toString=g,l.values=function(){for(c=[],f=0;f<s.length;f++)c.push(s[f][1]);return o(c,h)},h&&(l[Symbol.iterator]=l.entries),l}e.URL=function(e,t){var r,o,f=document.createElement("a"),u=document.createElement("a"),h=document.createElement("input"),c=this,l=/(blob|ftp|wss?|https?):/;if(h.type="url",t=String(t||"").trim(),(h.value=t)&&!h.checkValidity())return n(t);if(e=String(e).trim(),h.value=e||0,h.checkValidity())u.href=e;else{if(!t)return n(e);u.href=t,e&&((o=e.match(/^\/+/))&&2==o[0].length?u.href=u.protocol+e:/[?#]/.test(e[0])?u.href+=e:"/"==e[0]||"/"==u.pathname?u.href=u.origin+"/"+e.replace(/^\/+/,""):(r=u.pathname.split("/"),t=e.replace(/^(\.\/)?/,"").split("../"),u.href=u.origin+r.slice(0,Math.max(1,r.length-t.length)).concat(t.pop()).join("/")))}function s(e,t,n,r){return r={enumerable:!0},t||(r.set=function(t){null!=t&&(u[e]=String(t),"href"!=e&&"search"!=e||(o=new i(u.search,u)))}),r.get=n||function(){return function(e){return f.href=u.href,f.protocol="http:","protocol"==e||"href"==e||l.test(u.protocol)?u[e]:"origin"==e?l.test(u.protocol)?u[e]:"null":f[e]}(e)},r}return o=new i(u.search,u),c.toString=c.toJSON=u.toString.bind(u),Object.defineProperties(c,{href:s("href"),protocol:s("protocol"),username:s("username"),password:s("password"),hostname:s("hostname"),host:s("host"),port:s("port"),search:s("search"),hash:s("hash"),pathname:s("pathname"),origin:s("origin",1),searchParams:s("searchParams",1,function(){return o})})},e.URLSearchParams=i});